<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="IDisposable, IAsyncDisposable, and Tasks: Dispose Behavior With Tasks In C#" /><meta property="og:locale" content="en" /><meta name="description" content="While working with HTTP calls that return a Stream via HttpClient’s var response = await SendAsync(request, HttpCompletionOption.ResponseHeadersRead); -&gt; var stream = await response.Content.ReadAsStreamAsync(); method for efficient handling of streamed data Brian Dunnington identified the response should be disposed and pointed me to https://www.stevejgordon.co.uk/using-httpcompletionoption-responseheadersread-to-improve-httpclient-performance-dotnet." /><meta property="og:description" content="While working with HTTP calls that return a Stream via HttpClient’s var response = await SendAsync(request, HttpCompletionOption.ResponseHeadersRead); -&gt; var stream = await response.Content.ReadAsStreamAsync(); method for efficient handling of streamed data Brian Dunnington identified the response should be disposed and pointed me to https://www.stevejgordon.co.uk/using-httpcompletionoption-responseheadersread-to-improve-httpclient-performance-dotnet." /><link rel="canonical" href="https://kendaleiv.com/idisposable-iasyncdisposable-and-tasks-dispose-behavior-with-tasks-in-csharp/" /><meta property="og:url" content="https://kendaleiv.com/idisposable-iasyncdisposable-and-tasks-dispose-behavior-with-tasks-in-csharp/" /><meta property="og:site_name" content="Ken Dale" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-02-10T00:00:00-05:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="IDisposable, IAsyncDisposable, and Tasks: Dispose Behavior With Tasks In C#" /><meta name="twitter:site" content="@kendaleiv" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-02-10T00:00:00-05:00","datePublished":"2021-02-10T00:00:00-05:00","description":"While working with HTTP calls that return a Stream via HttpClient’s var response = await SendAsync(request, HttpCompletionOption.ResponseHeadersRead); -&gt; var stream = await response.Content.ReadAsStreamAsync(); method for efficient handling of streamed data Brian Dunnington identified the response should be disposed and pointed me to https://www.stevejgordon.co.uk/using-httpcompletionoption-responseheadersread-to-improve-httpclient-performance-dotnet.","headline":"IDisposable, IAsyncDisposable, and Tasks: Dispose Behavior With Tasks In C#","mainEntityOfPage":{"@type":"WebPage","@id":"https://kendaleiv.com/idisposable-iasyncdisposable-and-tasks-dispose-behavior-with-tasks-in-csharp/"},"url":"https://kendaleiv.com/idisposable-iasyncdisposable-and-tasks-dispose-behavior-with-tasks-in-csharp/"}</script><title>IDisposable, IAsyncDisposable, and Tasks: Dispose Behavior With Tasks In C# | Ken Dale</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Ken Dale"><meta name="application-name" content="Ken Dale"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://www.gravatar.com/avatar/19c1d76389b58d1b972fc2be013bcc73.png?s=200" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Ken Dale</a></div><div class="site-subtitle font-italic">Jesus follower, husband, father, cat dad, software engineer.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/speaking/" class="nav-link"> <i class="fa-fw fas fa-microphone ml-xl-3 mr-xl-3 unloaded"></i> <span>SPEAKING</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/kendaleiv" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/kendaleiv" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['ken','kendaleiv.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>IDisposable, IAsyncDisposable, and Tasks: Dispose Behavior With Tasks In C#</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>IDisposable, IAsyncDisposable, and Tasks: Dispose Behavior With Tasks In C#</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1612933200" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Feb 10, 2021 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/kendaleiv">Ken Dale</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="326 words"> <em>1 min</em> read</span></div></div></div><div class="post-content"><p>While working with HTTP calls that return a <code class="language-plaintext highlighter-rouge">Stream</code> via <code class="language-plaintext highlighter-rouge">HttpClient</code>’s <code class="language-plaintext highlighter-rouge">var response = await SendAsync(request, HttpCompletionOption.ResponseHeadersRead);</code> -&gt; <code class="language-plaintext highlighter-rouge">var stream = await response.Content.ReadAsStreamAsync();</code> method for efficient handling of streamed data <a href="https://twitter.com/briandunnington">Brian Dunnington</a> identified the response should be disposed and pointed me to <a href="https://www.stevejgordon.co.uk/using-httpcompletionoption-responseheadersread-to-improve-httpclient-performance-dotnet">https://www.stevejgordon.co.uk/using-httpcompletionoption-responseheadersread-to-improve-httpclient-performance-dotnet</a>.</p><p><strong>Working through it I found disposing a <code class="language-plaintext highlighter-rouge">Task&lt;T&gt;</code> itself doesn’t appear to call underlying <code class="language-plaintext highlighter-rouge">Dispose</code>/<code class="language-plaintext highlighter-rouge">DisposeAsync</code> methods on the generic <code class="language-plaintext highlighter-rouge">T</code>. Instead, the <code class="language-plaintext highlighter-rouge">T</code> itself, in this case a <code class="language-plaintext highlighter-rouge">Stream</code>, should be disposed.</strong></p><p>Also, <a href="https://devblogs.microsoft.com/pfxteam/do-i-need-to-dispose-of-tasks/">https://devblogs.microsoft.com/pfxteam/do-i-need-to-dispose-of-tasks/</a> indicates that disposing of tasks is probably not necessary, but rather something to consider to meet performance goals. For what it’s worth this post is dated in 2012, prior to the release of .NET Core.</p><h2 id="example"><span class="mr-2">Example</span><a href="#example" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
</pre><td class="rouge-code"><pre><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Threading.Tasks</span><span class="p">;</span>
                    
<span class="k">public</span> <span class="k">class</span> <span class="nc">Program</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">//</span>
        <span class="c1">// IDisposable</span>
        <span class="c1">//</span>
        
        <span class="kt">var</span> <span class="n">myDisposableTask</span> <span class="p">=</span> <span class="n">Task</span><span class="p">.</span><span class="nf">FromResult</span><span class="p">(</span><span class="k">new</span> <span class="nf">MyDisposable</span><span class="p">());</span>
        
        <span class="n">myDisposableTask</span><span class="p">.</span><span class="nf">Dispose</span><span class="p">();</span>
        
        <span class="n">MyDisposable</span> <span class="n">myDisposable</span><span class="p">;</span>
        
        <span class="k">using</span> <span class="p">(</span><span class="n">myDisposable</span> <span class="p">=</span> <span class="k">await</span> <span class="n">myDisposableTask</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"myDisposable.IsDisposed inside using: "</span>
                <span class="p">+</span> <span class="n">myDisposable</span><span class="p">.</span><span class="n">IsDisposed</span> <span class="cm">/* == False */</span><span class="p">);</span>
        <span class="p">};</span>
        
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"myDisposable.IsDisposed outside using: "</span>
            <span class="p">+</span> <span class="n">myDisposable</span><span class="p">.</span><span class="n">IsDisposed</span> <span class="cm">/* == True */</span><span class="p">);</span>
        
        <span class="c1">//</span>
        <span class="c1">// IAsyncDisposable</span>
        <span class="c1">//</span>
        
        <span class="kt">var</span> <span class="n">myAsyncDisposableTask</span> <span class="p">=</span> <span class="n">Task</span><span class="p">.</span><span class="nf">FromResult</span><span class="p">(</span><span class="k">new</span> <span class="nf">MyAsyncDisposable</span><span class="p">());</span>
        
        <span class="n">myAsyncDisposableTask</span><span class="p">.</span><span class="nf">Dispose</span><span class="p">();</span>
        
        <span class="n">MyAsyncDisposable</span> <span class="n">myAsyncDisposable</span><span class="p">;</span>
        
        <span class="k">await</span> <span class="k">using</span> <span class="p">(</span><span class="n">myAsyncDisposable</span> <span class="p">=</span> <span class="k">await</span> <span class="n">myAsyncDisposableTask</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"myAsyncDisposable.IsDisposed inside await using: "</span>
                <span class="p">+</span> <span class="n">myAsyncDisposable</span><span class="p">.</span><span class="n">IsDisposed</span> <span class="cm">/* == False */</span><span class="p">);</span>
        <span class="p">}</span>
        
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"myAsyncDisposable.IsDisposed outside await using: "</span>
            <span class="p">+</span> <span class="n">myAsyncDisposable</span><span class="p">.</span><span class="n">IsDisposed</span> <span class="cm">/* == True */</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">MyDisposable</span> <span class="p">:</span> <span class="n">IDisposable</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">bool</span> <span class="n">IsDisposed</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">private</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Dispose</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">IsDisposed</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">MyAsyncDisposable</span> <span class="p">:</span> <span class="n">IAsyncDisposable</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">bool</span> <span class="n">IsDisposed</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">private</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="n">ValueTask</span> <span class="nf">DisposeAsync</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">IsDisposed</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        
        <span class="k">return</span> <span class="n">ValueTask</span><span class="p">.</span><span class="n">CompletedTask</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/dotnet/" class="post-tag no-text-decoration" >dotnet</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=IDisposable%2C+IAsyncDisposable%2C+and+Tasks%3A+Dispose+Behavior+With+Tasks+In+C%23+-+Ken+Dale&url=https%3A%2F%2Fkendaleiv.com%2Fidisposable-iasyncdisposable-and-tasks-dispose-behavior-with-tasks-in-csharp%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=IDisposable%2C+IAsyncDisposable%2C+and+Tasks%3A+Dispose+Behavior+With+Tasks+In+C%23+-+Ken+Dale&u=https%3A%2F%2Fkendaleiv.com%2Fidisposable-iasyncdisposable-and-tasks-dispose-behavior-with-tasks-in-csharp%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fkendaleiv.com%2Fidisposable-iasyncdisposable-and-tasks-dispose-behavior-with-tasks-in-csharp%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/avoid-exposing-status-uri-from-durable-functions-extension-for-azure-functions-to-untrusted-parties-it-contains-a-secret-key/">Avoid Exposing Status Uri From Durable Functions Extension For Azure Functions To Untrusted Parties (It Contains A Secret Key!)</a><li><a href="/debugging-fan-out-operation-failures-with-custom-exception-messages-using-durable-functions-extension-for-azure-functions-on-csharp/">Debugging Fan-Out Operation Failures With Custom Exception Messages Using Durable Functions Extension For Azure Functions On C#</a><li><a href="/running-code-on-local-computer-localhost-only-using-azure-functions-with-csharp/">Running Code On Local Computer / Localhost Only Using Azure Functions With C#</a><li><a href="/thoughts-on-debugging-durable-functions-extension-orchestrations-for-azure-functions-backed-by-azure-table-storage/">Thoughts On Debugging Durable Functions Extension Orchestrations For Azure Functions Backed By Azure Table Storage</a><li><a href="/retrieving-all-managed-identity-objectids-in-resource-group-for-azure-app-services-and-azure-functions-using-azure-cli/">Retrieving All Managed Identity ObjectIds In Resource Group For Azure App Services And Azure Functions Using Azure CLI</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/dotnet/">dotnet</a> <a class="post-tag" href="/tags/angular/">angular</a> <a class="post-tag" href="/tags/azure/">azure</a> <a class="post-tag" href="/tags/azure-functions/">azure-functions</a> <a class="post-tag" href="/tags/durable-functions/">durable-functions</a> <a class="post-tag" href="/tags/csharp/">csharp</a> <a class="post-tag" href="/tags/dotnetcore/">dotnetcore</a> <a class="post-tag" href="/tags/testing/">testing</a> <a class="post-tag" href="/tags/typescript/">typescript</a> <a class="post-tag" href="/tags/javascript/">javascript</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/quickstart-for-creating-a-library-using-the-dotnet-core-cli/"><div class="card-body"> <em class="small" data-ts="1580619600" data-df="ll" > Feb 2, 2020 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Quickstart for Creating a Library Using the .NET Core CLI</h3><div class="text-muted small"><p> The .NET Core CLI enables quickly scaffolding a new library. Here’s a quickstart of commands to use, substituting My.Sample.Project for your own new project: &amp;gt; dotnet new --update-apply &amp;gt; mk...</p></div></div></a></div><div class="card"> <a href="/coding-to-support-both-dotnet-full-framework-and-dotnet-core/"><div class="card-body"> <em class="small" data-ts="1582088400" data-df="ll" > Feb 19, 2020 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Coding To Support Both .NET Full Framework and .NET Core</h3><div class="text-muted small"><p> Sometimes when writing .NET libraries we want to support .NET Full Framework, as well as .NET Core. In many cases the functionality is the same, but sometimes it is different. For the cases where ...</p></div></div></a></div><div class="card"> <a href="/leniently-parse-comma-separated-configuration-values-using-csharp/"><div class="card-body"> <em class="small" data-ts="1603944000" data-df="ll" > Oct 29, 2020 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Leniently Parse Comma Separated Configuration Values Using C#</h3><div class="text-muted small"><p> Whether you’re running .NET full framework or .NET Core sometimes you may want to read configuration values at runtime. Sometimes the value might look like &quot;a,b,c&quot;, which some might write as &quot;a, b,...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/retrieving-managed-identity-access-tokens-for-azure-web-apps-using-powershell-console/" class="btn btn-outline-primary" prompt="Older"><p>Retrieving Managed Identity Access Tokens For Azure Web Apps Using PowerShell Console</p></a> <a href="/avoid-exposing-status-uri-from-durable-functions-extension-for-azure-functions-to-untrusted-parties-it-contains-a-secret-key/" class="btn btn-outline-primary" prompt="Newer"><p>Avoid Exposing Status Uri From Durable Functions Extension For Azure Functions To Untrusted Parties (It Contains A Secret Key!)</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://kendaleiv.com/idisposable-iasyncdisposable-and-tasks-dispose-behavior-with-tasks-in-csharp/'; this.page.identifier = '/idisposable-iasyncdisposable-and-tasks-dispose-behavior-with-tasks-in-csharp/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://kendaleiv.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (typeof modeToggle !== "undefined") { /* modeToggle.addEventListener('click', reloadDisqus); // not pretty for 'color-scheme' */ window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/kendaleiv">Ken Dale</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/dotnet/">dotnet</a> <a class="post-tag" href="/tags/angular/">angular</a> <a class="post-tag" href="/tags/azure/">azure</a> <a class="post-tag" href="/tags/azure-functions/">azure-functions</a> <a class="post-tag" href="/tags/durable-functions/">durable-functions</a> <a class="post-tag" href="/tags/csharp/">csharp</a> <a class="post-tag" href="/tags/dotnetcore/">dotnetcore</a> <a class="post-tag" href="/tags/testing/">testing</a> <a class="post-tag" href="/tags/typescript/">typescript</a> <a class="post-tag" href="/tags/javascript/">javascript</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-72NVH76BJC"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-72NVH76BJC'); }); </script>
